<!-- templates/partials/switch.html -->
<div class="switch-wrapper">
    <div class="sun"></div>
    <div class="toggle-wrapper">
        <input id="switch" type="checkbox" hx-post="/htmx/toggle" hx-trigger="change" hx-target="#switch-content" />
        <label for="switch" id="toggle">Toggle</label>
    </div>
    <div class="moon"></div>
</div>
<div id="switch-content"></div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const d = new Date();
        const hours = d.getHours();
        const night = (hours >= 19) || (hours <= 7); // between 7pm and 7am
        const body = document.querySelector('body');
        const html = document.querySelector('html');
        const input = document.getElementById('switch');

        if (night) {
            input.checked = true;
            body.classList.add('night');
            html.classList.add('night');
        }

        input.addEventListener('change', function () {
            if (input.checked) {
                body.classList.add('night');
                html.classList.add('night');
            } else {
                body.classList.remove('night');
                html.classList.remove('night');
            }
        });
    });
</script>
